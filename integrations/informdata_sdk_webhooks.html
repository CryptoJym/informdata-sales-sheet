<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>InformData Connect SDK &amp; Webhook Playbook</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Source+Code+Pro:wght@500&display=swap" rel="stylesheet" />
  <style>
    :root {
      color-scheme: light;
      --bg: #f6f7fb;
      --surface: #ffffff;
      --surface-alt: #eef1f8;
      --border: #d7deeb;
      --border-strong: #b7c2d8;
      --text: #1f2937;
      --muted: #667085;
      --accent: #2563eb;
      --accent-soft: #e0e9ff;
      --warning: #b45309;
      --success: #047857;
      --danger: #b91c1c;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
    }
    * { box-sizing: border-box; }
    body { margin: 0; background: var(--bg); color: var(--text); line-height: 1.65; }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
    code, pre { font-family: 'Source Code Pro', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; font-size: 0.95rem; }
    .top-nav { background: #0f172a; color: #fff; padding: 0.85rem 1.5rem; display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center; justify-content: center; }
    .top-nav a { color: #fff; font-weight: 600; font-size: 0.95rem; }
    .top-nav a:hover { text-decoration: underline; }
    .page { max-width: 1280px; margin: 0 auto; padding: 2.5rem 1.5rem 4rem; display: grid; gap: 2.5rem; }
    header.hero { display: flex; flex-direction: column; gap: 1.25rem; }
    header.hero h1 { margin: 0; font-size: 2.9rem; font-weight: 700; letter-spacing: -0.02em; }
    header.hero p.lead { margin: 0; color: var(--muted); max-width: 75ch; font-size: 1.1rem; }
    .cta-row { display: flex; flex-wrap: wrap; gap: 0.75rem; }
    .btn { display: inline-flex; align-items: center; gap: 0.45rem; padding: 0.65rem 1.1rem; border-radius: 0.75rem; border: 1px solid transparent; font-weight: 600; cursor: pointer; transition: transform 0.15s ease, box-shadow 0.2s ease; }
    .btn-primary { background: var(--accent); color: #fff; box-shadow: 0 10px 24px rgba(37, 99, 235, 0.22); }
    .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 12px 26px rgba(37, 99, 235, 0.28); }
    .btn-outline { background: var(--surface); color: var(--accent); border: 1px solid var(--border); }
    .btn-outline:hover { background: var(--accent-soft); }
    .callout { background: linear-gradient(135deg, rgba(37, 99, 235, 0.08), rgba(37, 99, 235, 0.02)); border: 1px solid rgba(37, 99, 235, 0.18); border-radius: 1.1rem; padding: 1.15rem 1.35rem; max-width: 88ch; color: var(--muted); }
    .callout strong { color: var(--text); }
    .layout { display: grid; gap: 2rem; grid-template-columns: minmax(0, 1fr) minmax(0, 300px); align-items: start; }
    nav.toc { position: sticky; top: 1.25rem; background: var(--surface); border: 1px solid var(--border); border-radius: 1rem; padding: 1.2rem 1.4rem; box-shadow: 0 10px 24px rgba(15, 23, 42, 0.08); }
    nav.toc h2 { margin: 0 0 0.75rem; font-size: 1rem; letter-spacing: 0.04em; color: var(--muted); text-transform: uppercase; }
    nav.toc ul { list-style: none; padding: 0; margin: 0; display: grid; gap: 0.45rem; }
    nav.toc a { color: var(--text); font-weight: 600; font-size: 0.95rem; display: inline-flex; align-items: center; gap: 0.4rem; }
    nav.toc a span { color: var(--muted); font-size: 0.83rem; font-weight: 500; }
    section { background: var(--surface); border-radius: 1.15rem; border: 1px solid var(--border); padding: 1.55rem 1.8rem 1.75rem; box-shadow: 0 12px 26px rgba(15, 23, 42, 0.08); display: grid; gap: 1.1rem; }
    section h2 { margin: 0; font-size: 1.8rem; font-weight: 700; letter-spacing: -0.01em; }
    section p { margin: 0; }
    section ul, section ol { margin: 0.35rem 0 0.35rem 1.25rem; }
    .grid { display: grid; gap: 1rem; }
    .grid.two { grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
    .grid.three { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
    .stat-card, .card { border: 1px solid var(--border); border-radius: 1rem; padding: 1.1rem 1.2rem; background: var(--surface-alt); box-shadow: inset 0 1px 0 rgba(255,255,255,0.6); }
    .stat-card strong { display: block; font-size: 1.65rem; font-weight: 700; }
    .badge { display: inline-flex; align-items: center; gap: 0.35rem; padding: 0.25rem 0.55rem; border-radius: 999px; font-size: 0.78rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.04em; }
    .badge-accent { background: rgba(37, 99, 235, 0.12); color: var(--accent); }
    .badge-success { background: rgba(4, 120, 87, 0.12); color: var(--success); }
    .badge-warning { background: rgba(180, 83, 9, 0.12); color: var(--warning); }
    .badge-danger { background: rgba(185, 28, 28, 0.12); color: var(--danger); }
    .codeblock { background: #111827; color: #e5e7eb; border-radius: 0.9rem; padding: 1rem 1.1rem; overflow-x: auto; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05); }
    .codeblock pre { margin: 0; }
    .timeline { display: grid; gap: 1rem; }
    .timeline-step { background: var(--surface-alt); border: 1px solid var(--border); border-radius: 0.9rem; padding: 1rem 1.1rem; display: grid; gap: 0.4rem; position: relative; }
    .timeline-step::before { content: attr(data-step); position: absolute; top: -0.8rem; left: 1rem; background: var(--accent); color: #fff; border-radius: 999px; padding: 0.25rem 0.65rem; font-weight: 600; font-size: 0.8rem; letter-spacing: 0.05em; box-shadow: 0 6px 14px rgba(37, 99, 235, 0.28); }
    table { width: 100%; border-collapse: collapse; background: var(--surface-alt); border-radius: 0.85rem; overflow: hidden; box-shadow: inset 0 1px 0 rgba(255,255,255,0.6); }
    thead th { background: rgba(37, 99, 235, 0.12); color: var(--text); text-align: left; padding: 0.65rem 0.9rem; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em; border-bottom: 1px solid var(--border); }
    tbody td { padding: 0.6rem 0.9rem; border-bottom: 1px solid var(--border); font-size: 0.95rem; vertical-align: top; }
    tbody tr:last-child td { border-bottom: none; }
    .pill-list { display: flex; flex-wrap: wrap; gap: 0.4rem; margin: 0.4rem 0 0; }
    .pill { background: rgba(15, 23, 42, 0.08); color: var(--text); padding: 0.25rem 0.55rem; border-radius: 999px; font-size: 0.78rem; font-weight: 600; }
    .note { background: rgba(244, 114, 182, 0.12); border: 1px solid rgba(236, 72, 153, 0.18); border-radius: 0.9rem; padding: 0.85rem 1rem; color: #9d174d; font-weight: 500; }
    footer { color: var(--muted); font-size: 0.9rem; }
    @media (max-width: 1024px) {
      .layout { grid-template-columns: 1fr; }
      nav.toc { position: static; }
    }
    @media (max-width: 640px) {
      .page { padding: 2.2rem 1rem 3.5rem; }
      header.hero h1 { font-size: 2.2rem; }
      .btn { width: 100%; justify-content: center; }
      section { padding: 1.3rem 1.2rem 1.4rem; }
      .timeline-step::before { left: 0.9rem; }
    }
  </style>
</head>
<body>
  <header class="top-nav">
    <a href="../index.html">Pricing Home</a>
    <a href="../docs/sales/pricing_sheet.md">Pricing Sheet (MD)</a>
    <a href="../informdata_source_list.html">Source Directory</a>
    <a href="../county_fee_breakdown.html">County Fees</a>
    <a href="../national_scan_components.html">National Scan</a>
  </header>
  <main class="page">
    <header class="hero">
      <div class="badge badge-accent">InformData Connect</div>
      <h1>InformData API &amp; Webhook Guide</h1>
      <p class="lead">This page shows how to set up the TypeScript SDK, send an order, catch every webhook, and keep many orders in the right order. Plain words, short steps, all in one place.</p>
      <div class="cta-row">
        <a class="btn btn-primary" href="../integrations/informdata_sdk_webhooks.md">Download Markdown copy</a>
        <a class="btn btn-outline" href="../docs/notes/implementation_overview.md">Implementation overview</a>
        <a class="btn btn-outline" href="../docs/sales/pricing_sheet.md">Back to pricing notes</a>
      </div>
      <div class="callout">
        <strong>What you will learn:</strong>
        <ul>
          <li>Which base URL and token to use.</li>
          <li>How to install the SDK and send a test order.</li>
          <li>How to listen to webhooks and handle many events.</li>
          <li>Simple fixes when something breaks.</li>
        </ul>
      </div>
    </header>

    <div class="layout">
      <div class="content">
        <section id="map">
          <h2>1. Map of this page</h2>
          <p>Each section is short and uses the same pattern: learn, do, check.</p>
          <div class="grid three">
            <div class="stat-card">
              <strong>Step 1</strong>
              <span>Pick sandbox or production and grab a token.</span>
            </div>
            <div class="stat-card">
              <strong>Step 2</strong>
              <span>Install the SDK and send one order.</span>
            </div>
            <div class="stat-card">
              <strong>Step 3</strong>
              <span>Catch webhooks, replay them, and stay reliable.</span>
            </div>
          </div>
        </section>

        <section id="environments">
          <h2>2. Choose the right environment</h2>
          <p>Use sandbox while you test. Use production for real customers. Tokens last only a short time, so refresh them often.</p>
          <table>
            <thead>
              <tr>
                <th>Environment</th>
                <th>Base URL</th>
                <th>What to remember</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Sandbox</td>
                <td><code>https://sandbox.api.sjvassoc.com/clients/</code></td>
                <td>Good for demos and replay tests. Limit is ~5,000 calls in five minutes.</td>
              </tr>
              <tr>
                <td>Production</td>
                <td><code>https://api.sjvassoc.com/clients/</code></td>
                <td>Serve live customers here. Lock webhook URLs behind a WAF or IP allow list.</td>
              </tr>
            </tbody>
          </table>
          <div class="grid two">
            <div class="card">
              <strong>Before you start</strong>
              <ul>
                <li>Install the SDK tar file (<code>typescript-sdk-prod-v0.9.2.tar</code>) or the published npm package.</li>
                <li>Store JWT secrets in a safe service (Doppler, Vault, AWS Secrets Manager).</li>
                <li>Create a queue topic (SQS FIFO, Pub/Sub) and a place to keep payload history (S3/GCS).</li>
              </ul>
            </div>
            <div class="card">
              <strong>Keep data safe</strong>
              <ul>
                <li>Add a shared secret header or IP rule to your webhook endpoint. InformData does not sign payloads today.</li>
                <li>Rotate tokens at least every 90 days. Alert on 401 or 403 spikes.</li>
              </ul>
            </div>
          </div>
        </section>

        <section id="sdk">
          <h2>3. Install the SDK</h2>
          <p>Run this command from your project folder:</p>
          <div class="codeblock">
            <pre><code>npm install ./typescript-sdk-prod-v0.9.2.tar</code></pre>
          </div>
          <p>Then drop this helper into your code. It loads the right server and pulls a fresh token every time.</p>
          <div class="codeblock">
            <pre><code class="language-ts">import {
  createConfiguration,
  configureAuthMethods,
  OrdersApi,
  WebhooksApi,
} from '@informdata/connect-client';

export function makeClients(baseUrl: string, tokenProvider: () =&gt; Promise&lt;string&gt;) {
  const configuration = createConfiguration({
    baseServer: { url: baseUrl, description: 'InformData' },
    authMethods: configureAuthMethods({
      'JWT-Authentication': { tokenProvider },
    }),
  });

  return {
    orders: new OrdersApi(configuration),
    webhooks: new WebhooksApi(configuration),
  };
}</code></pre>
          </div>
          <p>Tip: wrap every SDK call in a retry helper that backs off on 429 or 5xx responses (1s → 2s → 4s → stop).</p>
        </section>

        <section id="order">
          <h2>4. Send your first order</h2>
          <p>Use the samples under <code>informdata-api-docs/Requests</code> to build the payload. Here is a short example:</p>
          <div class="codeblock">
            <pre><code class="language-json">{
  "order": {
    "clientOrderId": "QA-123",
    "subject": {
      "firstName": "Riley",
      "lastName": "Example",
      "birthdate": "1995-05-05"
    },
    "product": {
      "category": "CRIMINAL",
      "felonyYears": 7,
      "misdemeanorYears": 7
    },
    "jurisdiction": {
      "county": "Cobb",
      "state": "GA",
      "country": "United States"
    }
  }
}</code></pre>
          </div>
          <p>Post it with the SDK:</p>
          <div class="codeblock">
            <pre><code class="language-ts">const { orders } = makeClients(SANDBOX_URL, getToken);
const response = await orders.ordersPost({ orderRequest: payload });
const orderId = response.order?.id;
// Save orderId right away. Every webhook will include it.</code></pre>
          </div>
        </section>

        <section id="webhooks">
          <h2>5. Listen to webhooks</h2>
          <p>Subscribe once per environment. Send new payloads to your queue and answer with HTTP 200 in under a second.</p>
          <div class="codeblock">
            <pre><code class="language-ts">const { webhooks } = makeClients(SANDBOX_URL, getToken);

await webhooks.webhooksPost({
  webhookSubscription: {
    postUrl: 'https://hooks.vuplicity.com/informdata',
    isActive: true,
    events: new Set([
      'ORDER_STATUS_CHANGE',
      'NEED_INFO',
      'CALL_LOG_ADDED',
      'JX_REQUIREMENT_CHANGE',
    ]),
  },
});</code></pre>
          </div>
          <table>
            <thead>
              <tr>
                <th>Event</th>
                <th>Plain meaning</th>
                <th>What to do</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>ORDER_STATUS_CHANGE</code></td>
                <td>Status moved (for example, Pending → Complete).</td>
                <td>Update your record and tell the customer if it is done.</td>
              </tr>
              <tr>
                <td><code>NEED_INFO</code></td>
                <td>InformData paused work because something is missing.</td>
                <td>Get the missing item and send <code>ordersIdPatch</code>.</td>
              </tr>
              <tr>
                <td><code>CALL_LOG_ADDED</code></td>
                <td>A researcher left a new note.</td>
                <td>Pull the latest order detail so your team sees the note.</td>
              </tr>
              <tr>
                <td><code>JX_REQUIREMENT_CHANGE</code></td>
                <td>The court rules or fees changed mid-search.</td>
                <td>Decide if you need new approval or to re-price the job.</td>
              </tr>
            </tbody>
          </table>
          <div class="note">
            InformData retries for about 24 hours. Use <code>order.id</code> + event type + document <code>sequenceNumber</code> as your idempotency key.
          </div>
        </section>

        <section id="flow">
          <h2>6. Keep many orders in order</h2>
          <p>Webhooks can arrive in any order. Follow these simple guard rails:</p>
          <ol>
            <li><strong>Save first, work later.</strong> Drop every payload into a durable queue and store a copy in S3 or GCS.</li>
            <li><strong>Process by order.</strong> Use <code>order.id</code> as the queue group key so one worker handles one order at a time.</li>
            <li><strong>Sort timelines.</strong> Inside the worker, sort <code>order.activity</code> by the <code>addedDate</code> timestamp. If two events share the same time, keep the arrival order.</li>
            <li><strong>Reject backwards moves.</strong> If you already saved <code>COMPLETE</code> and a later webhook says <code>PENDING</code>, flag it for review.</li>
          </ol>
        </section>

        <section id="need-info">
          <h2>7. Handle Need Info and documents</h2>
          <p>When InformData asks for something, reply with a patch. Here is a simple pattern:</p>
          <div class="codeblock">
            <pre><code class="language-ts">await orders.ordersIdPatch({
  id: orderId,
  orderPatchRequest: {
    note: 'Uploaded driver authorisation form',
  },
});</code></pre>
          </div>
          <p>To upload a document:</p>
          <div class="codeblock">
            <pre><code class="language-ts">await orders.ordersIdDocumentsPost({
  id: orderId,
  documentUploadRequest: {
    sequenceNumber: 2,
    documentName: 'Disposition.pdf',
    documentType: 'COURT_RECORD',
    contentBase64: await encodeFile('Disposition.pdf'),
  },
});</code></pre>
          </div>
          <p>Recurring monitoring (MedEx, Booking, Risk Monitoring) can be stopped with <code>orders.ordersIdRecurringDelete</code>. Always log the next scheduled date so billing stays in sync.</p>
        </section>

        <section id="testing">
          <h2>8. Test and replay</h2>
          <p>Use sandbox every day. Send one sample order in the morning and make sure it completes.</p>
          <p>Need to replay real events? Use the small CLI at <code>integrations/webhook-replay-demo/</code>.</p>
          <div class="codeblock">
            <pre><code>cd integrations/webhook-replay-demo
pnpm install
pnpm ts-node src/replay.ts --input samples/criminal.ndjson --target http://localhost:8787/informdata-hook</code></pre>
          </div>
          <p>The CLI sends each saved payload two times by default. This proves your code handles duplicates.</p>
        </section>

        <section id="errors">
          <h2>9. If something goes wrong</h2>
          <table>
            <thead>
              <tr>
                <th>What you see</th>
                <th>What it means</th>
                <th>Easy fix</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>400 from the SDK</td>
                <td>The payload is missing a field or has a bad value.</td>
                <td>Stop retrying, log the message, and show the issue to the intake UI.</td>
              </tr>
              <tr>
                <td>401 or 403</td>
                <td>JWT expired or the IP is not allowed.</td>
                <td>Fetch a new token and check your firewall list.</td>
              </tr>
              <tr>
                <td>409</td>
                <td>The order is locked or already finished.</td>
                <td>Wait for the next webhook. Do not retry right away.</td>
              </tr>
              <tr>
                <td>429 or 5xx</td>
                <td>InformData is busy or down.</td>
                <td>Retry with backoff. Alert if it lasts more than 15 minutes.</td>
              </tr>
              <tr>
                <td>Duplicate webhook</td>
                <td>Our endpoint took too long or returned an error.</td>
                <td>Use the idempotency key and make sure the handler responds fast.</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section id="resources">
          <h2>10. Helpful links</h2>
          <ul>
            <li>Markdown version of this guide: <code>informdata-sales-sheet/integrations/informdata_sdk_webhooks.md</code></li>
            <li>Official request and response samples: <code>informdata-api-docs/Requests</code> and <code>/Responses</code></li>
            <li>Webhook replay demo: <code>informdata-sales-sheet/integrations/webhook-replay-demo/</code></li>
            <li>Priced service list: <code>content/pricing/informdata_pricing_table.csv</code></li>
            <li>GitHub repo: <a href="https://github.com/CryptoJym/informdata-sales-sheet" target="_blank" rel="noopener">https://github.com/CryptoJym/informdata-sales-sheet</a></li>
          </ul>
        </section>

        <footer>
          Last updated: <strong>November 3, 2025</strong> • Maintainer: Platform Integrations Guild
        </footer>
      </div>

      <nav class="toc" aria-label="On this page">
        <h2>On this page</h2>
        <ul>
          <li><a href="#map">1. Map of this page</a></li>
          <li><a href="#environments">2. Choose the right environment</a></li>
          <li><a href="#sdk">3. Install the SDK</a></li>
          <li><a href="#order">4. Send your first order</a></li>
          <li><a href="#webhooks">5. Listen to webhooks</a></li>
          <li><a href="#flow">6. Keep many orders in order</a></li>
          <li><a href="#need-info">7. Handle Need Info</a></li>
          <li><a href="#testing">8. Test and replay</a></li>
          <li><a href="#errors">9. If something goes wrong</a></li>
          <li><a href="#resources">10. Helpful links</a></li>
        </ul>
      </nav>
    </div>
  </main>
</body>
</html>
