<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>InformData Connect SDK &amp; Webhook Playbook</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Source+Code+Pro:wght@500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../styles/tokens.css" />
</head>
<body class="page-docs">
  <header class="top-nav">
    <a href="../index.html">Pricing Home</a>
    <a href="../docs/sales/pricing_sheet.md">Pricing Sheet (MD)</a>
    <a href="../informdata_source_list.html">Source Directory</a>
    <a href="../county_fee_breakdown.html">County Fees</a>
    <a href="../national_scan_components.html">National Scan</a>
  </header>
  <main class="page">
    <header class="hero">
      <div class="badge badge-accent">InformData Connect</div>
      <h1>InformData API &amp; Webhook Guide</h1>
      <p class="lead">This page shows how to set up the TypeScript SDK, send an order, catch every webhook, and keep many orders in the right order. Plain words, short steps, all in one place.</p>
      <div class="cta-row">
        <a class="btn btn-primary" href="../integrations/informdata_sdk_webhooks.md">Download Markdown copy</a>
        <a class="btn btn-outline" href="../docs/notes/implementation_overview.md">Implementation overview</a>
        <a class="btn btn-outline" href="../docs/sales/pricing_sheet.md">Back to pricing notes</a>
      </div>
      <div class="callout">
        <strong>What you will learn:</strong>
        <ul>
          <li>Which base URL and token to use.</li>
          <li>How to install the SDK and send a test order.</li>
          <li>How to listen to webhooks and handle many events.</li>
          <li>Simple fixes when something breaks.</li>
        </ul>
      </div>
    </header>

    <div class="layout">
      <div class="content">
        <section id="map">
          <h2>1. Map of this page</h2>
          <p>Each section is short and uses the same pattern: learn, do, check.</p>
          <div class="grid three">
            <div class="stat-card">
              <strong>Step 1</strong>
              <span>Pick sandbox or production and grab a token.</span>
            </div>
            <div class="stat-card">
              <strong>Step 2</strong>
              <span>Install the SDK and send one order.</span>
            </div>
            <div class="stat-card">
              <strong>Step 3</strong>
              <span>Catch webhooks, replay them, and stay reliable.</span>
            </div>
          </div>
        </section>

        <section id="environments">
          <h2>2. API setup: choose the right environment</h2>
          <p>Use sandbox while you test. Use production for real customers. Tokens last only a short time, so refresh them often.</p>
          <table>
            <thead>
              <tr>
                <th>Environment</th>
                <th>Base URL</th>
                <th>What to remember</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Sandbox</td>
                <td><code>https://sandbox.api.sjvassoc.com/clients/</code></td>
                <td>Good for demos and replay tests. Limit is ~5,000 calls in five minutes.</td>
              </tr>
              <tr>
                <td>Production</td>
                <td><code>https://api.sjvassoc.com/clients/</code></td>
                <td>Serve live customers here. Lock webhook URLs behind a WAF or IP allow list.</td>
              </tr>
            </tbody>
          </table>
          <div class="grid two">
            <div class="card">
              <strong>Before you start</strong>
              <ul>
                <li>Install the SDK tar file (<code>typescript-sdk-prod-v0.9.2.tar</code>) or the published npm package.</li>
                <li>Store JWT secrets in a safe service (Doppler, Vault, AWS Secrets Manager).</li>
                <li>Create a queue topic (SQS FIFO, Pub/Sub) and a place to keep payload history (S3/GCS).</li>
              </ul>
            </div>
            <div class="card">
              <strong>Keep data safe</strong>
              <ul>
                <li>Add a shared secret header or IP rule to your webhook endpoint. InformData does not sign payloads today.</li>
                <li>Rotate tokens at least every 90 days. Alert on 401 or 403 spikes.</li>
              </ul>
            </div>
          </div>
        </section>

        <section id="sdk">
          <h2>3. API setup: install the SDK</h2>
          <p>Run this command from your project folder:</p>
          <div class="codeblock">
            <pre><code>npm install ./typescript-sdk-prod-v0.9.2.tar</code></pre>
          </div>
          <p>Then drop this helper into your code. It loads the right server and pulls a fresh token every time.</p>
          <div class="codeblock">
            <pre><code class="language-ts">import {
  createConfiguration,
  configureAuthMethods,
  OrdersApi,
  WebhooksApi,
} from '@informdata/connect-client';

export function makeClients(baseUrl: string, tokenProvider: () =&gt; Promise&lt;string&gt;) {
  const configuration = createConfiguration({
    baseServer: { url: baseUrl, description: 'InformData' },
    authMethods: configureAuthMethods({
      'JWT-Authentication': { tokenProvider },
    }),
  });

  return {
    orders: new OrdersApi(configuration),
    webhooks: new WebhooksApi(configuration),
  };
}</code></pre>
          </div>
          <p>Tip: wrap every SDK call in a retry helper that backs off on 429 or 5xx responses (1s → 2s → 4s → stop).</p>
        </section>

        <section id="order">
          <h2>4. API call: send your first order</h2>
          <p>Use the samples under <code>informdata-api-docs/Requests</code> to build the payload. Here is a short example:</p>
          <div class="codeblock">
            <pre><code class="language-json">{
  "order": {
    "clientOrderId": "QA-123",
    "subject": {
      "firstName": "Riley",
      "lastName": "Example",
      "birthdate": "1995-05-05"
    },
    "product": {
      "category": "CRIMINAL",
      "felonyYears": 7,
      "misdemeanorYears": 7
    },
    "jurisdiction": {
      "county": "Cobb",
      "state": "GA",
      "country": "United States"
    }
  }
}</code></pre>
          </div>
          <p>Post it with the SDK:</p>
          <div class="codeblock">
            <pre><code class="language-ts">const { orders } = makeClients(SANDBOX_URL, getToken);
const response = await orders.ordersPost({ orderRequest: payload });
const orderId = response.order?.id;
// Save orderId right away. Every webhook will include it.</code></pre>
          </div>
        </section>

        <section id="webhooks">
          <h2>5. Webhook basics: listen for events</h2>
          <p>Subscribe once per environment. Send new payloads to your queue and answer with HTTP 200 in under a second.</p>
          <div class="codeblock">
            <pre><code class="language-ts">const { webhooks } = makeClients(SANDBOX_URL, getToken);

await webhooks.webhooksPost({
  webhookSubscription: {
    postUrl: 'https://hooks.vuplicity.com/informdata',
    isActive: true,
    events: new Set([
      'ORDER_STATUS_CHANGE',
      'NEED_INFO',
      'CALL_LOG_ADDED',
      'JX_REQUIREMENT_CHANGE',
    ]),
  },
});</code></pre>
          </div>
          <table>
            <thead>
              <tr>
                <th>Event</th>
                <th>Plain meaning</th>
                <th>What to do</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>ORDER_STATUS_CHANGE</code></td>
                <td>Status moved (for example, Pending → Complete).</td>
                <td>Update your record and tell the customer if it is done.</td>
              </tr>
              <tr>
                <td><code>NEED_INFO</code></td>
                <td>InformData paused work because something is missing.</td>
                <td>Get the missing item and send <code>ordersIdPatch</code>.</td>
              </tr>
              <tr>
                <td><code>CALL_LOG_ADDED</code></td>
                <td>A researcher left a new note.</td>
                <td>Pull the latest order detail so your team sees the note.</td>
              </tr>
              <tr>
                <td><code>JX_REQUIREMENT_CHANGE</code></td>
                <td>The court rules or fees changed mid-search.</td>
                <td>Decide if you need new approval or to re-price the job.</td>
              </tr>
            </tbody>
          </table>
          <div class="note">
            InformData retries for about 24 hours. Use <code>order.id</code> + event type + document <code>sequenceNumber</code> as your idempotency key.
          </div>
        </section>

        <section id="flow">
          <h2>6. Webhook flow: keep many orders in order</h2>
          <p>Webhooks can arrive in any order. Follow these simple guard rails:</p>
          <ol>
            <li><strong>Save first, work later.</strong> Drop every payload into a durable queue and store a copy in S3 or GCS.</li>
            <li><strong>Process by order.</strong> Use <code>order.id</code> as the queue group key so one worker handles one order at a time.</li>
            <li><strong>Sort timelines.</strong> Inside the worker, sort <code>order.activity</code> by the <code>addedDate</code> timestamp. If two events share the same time, keep the arrival order.</li>
            <li><strong>Reject backwards moves.</strong> If you already saved <code>COMPLETE</code> and a later webhook says <code>PENDING</code>, flag it for review.</li>
          </ol>
        </section>

        <section id="need-info">
          <h2>7. Webhook actions: handle Need Info and documents</h2>
          <p>When InformData asks for something, reply with a patch. Here is a simple pattern:</p>
          <div class="codeblock">
            <pre><code class="language-ts">await orders.ordersIdPatch({
  id: orderId,
  orderPatchRequest: {
    note: 'Uploaded driver authorisation form',
  },
});</code></pre>
          </div>
          <p>To upload a document:</p>
          <div class="codeblock">
            <pre><code class="language-ts">await orders.ordersIdDocumentsPost({
  id: orderId,
  documentUploadRequest: {
    sequenceNumber: 2,
    documentName: 'Disposition.pdf',
    documentType: 'COURT_RECORD',
    contentBase64: await encodeFile('Disposition.pdf'),
  },
});</code></pre>
          </div>
          <p>Recurring monitoring (MedEx, Booking, Risk Monitoring) can be stopped with <code>orders.ordersIdRecurringDelete</code>. Always log the next scheduled date so billing stays in sync.</p>
        </section>

        <section id="long-waits">
          <h2>8. Long waits: webhooks are enough (no always-on service)</h2>
          <p>County searches can take days, but you do <strong>not</strong> need to keep a request open or pay for a long-running container just to wait. InformData uses a simple async pattern:</p>
          <ol>
            <li><strong>Order queued:</strong> You call <code>ordersPost</code>. InformData stores the job and responds right away with <code>order.id</code>. The HTTP call is done.</li>
            <li><strong>Background work:</strong> InformData researchers handle the slow court lookup. Nothing is happening on your server during this time.</li>
            <li><strong>Webhook ping:</strong> When the status changes (Need Info, Complete, etc.), InformData sends an HTTPS POST to the webhook URL you gave them. You store the payload, respond with HTTP 200, and move on.</li>
            <li><strong>Retries included:</strong> If your endpoint is down, InformData retries for about 24 hours. Because you save events with an idempotency key (<code>order.id</code> + event type + document sequence), duplicates are safe.</li>
            <li><strong>Optional health check:</strong> Run a daily job (for example on Vercel Cron, GitHub Actions, or any scheduler) that calls <code>ordersIdGet</code> for any order still “In Progress.” Alert a human if it crosses your SLA.</li>
          </ol>
          <p>A static hosting platform like <strong>Vercel</strong> is enough. You can host the webhook endpoint as a serverless function (average run time &lt;1s), queue events in your datastore, and schedule the health check with Vercel Cron. There is no need for a permanent process or a service like Railway whose only purpose would be to “hold the connection.”</p>
          <p>If a county is still slow after your alert window, follow up with your InformData support contact; the integration itself is already resilient.</p>
        </section>

        <section id="testing">
          <h2>9. Test and replay</h2>
          <p>Use sandbox every day. Send one sample order in the morning and make sure it completes.</p>
          <p>Need to replay real events? Use the small CLI at <code>integrations/webhook-replay-demo/</code>.</p>
          <div class="codeblock">
            <pre><code>cd integrations/webhook-replay-demo
pnpm install
pnpm ts-node src/replay.ts --input samples/criminal.ndjson --target http://localhost:8787/informdata-hook</code></pre>
          </div>
          <p>The CLI sends each saved payload two times by default. This proves your code handles duplicates.</p>
        </section>

        <section id="errors">
          <h2>10. If something goes wrong</h2>
          <table>
            <thead>
              <tr>
                <th>What you see</th>
                <th>What it means</th>
                <th>Easy fix</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>400 from the SDK</td>
                <td>The payload is missing a field or has a bad value.</td>
                <td>Stop retrying, log the message, and show the issue to the intake UI.</td>
              </tr>
              <tr>
                <td>401 or 403</td>
                <td>JWT expired or the IP is not allowed.</td>
                <td>Fetch a new token and check your firewall list.</td>
              </tr>
              <tr>
                <td>409</td>
                <td>The order is locked or already finished.</td>
                <td>Wait for the next webhook. Do not retry right away.</td>
              </tr>
              <tr>
                <td>429 or 5xx</td>
                <td>InformData is busy or down.</td>
                <td>Retry with backoff. Alert if it lasts more than 15 minutes.</td>
              </tr>
              <tr>
                <td>Duplicate webhook</td>
                <td>Our endpoint took too long or returned an error.</td>
                <td>Use the idempotency key and make sure the handler responds fast.</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section id="resources">
          <h2>11. Helpful links</h2>
          <ul>
            <li>Markdown version of this guide: <code>informdata-sales-sheet/integrations/informdata_sdk_webhooks.md</code></li>
            <li>Official request and response samples: <code>informdata-api-docs/Requests</code> and <code>/Responses</code></li>
            <li>Webhook replay demo: <code>informdata-sales-sheet/integrations/webhook-replay-demo/</code></li>
            <li>Priced service list: <code>content/pricing/informdata_pricing_table.csv</code></li>
            <li>GitHub repo: <a href="https://github.com/CryptoJym/informdata-sales-sheet" target="_blank" rel="noopener">https://github.com/CryptoJym/informdata-sales-sheet</a></li>
          </ul>
        </section>

        <footer>
          Last updated: <strong>November 3, 2025</strong> • Maintainer: Platform Integrations Guild
        </footer>
      </div>

      <nav class="toc" aria-label="On this page">
        <h2>On this page</h2>
        <ul>
          <li><a href="#map">1. Map of this page</a></li>
          <li><a href="#environments">2. API setup: environment</a></li>
          <li><a href="#sdk">3. API setup: SDK install</a></li>
          <li><a href="#order">4. API call: first order</a></li>
          <li><a href="#webhooks">5. Webhook basics</a></li>
          <li><a href="#flow">6. Webhook flow</a></li>
          <li><a href="#need-info">7. Webhook actions</a></li>
          <li><a href="#long-waits">8. Long waits explained</a></li>
          <li><a href="#testing">9. Test and replay</a></li>
          <li><a href="#errors">10. Troubleshooting</a></li>
          <li><a href="#resources">11. Helpful links</a></li>
        </ul>
      </nav>
    </div>
  </main>
</body>
</html>
